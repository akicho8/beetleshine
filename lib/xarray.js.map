{"version":3,"file":"xarray.js","names":["_xobject","require","_xinteger","_lodash","_interopRequireDefault","obj","__esModule","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","Xarray","ary_each_slice_to_a","ary","step","Error","new_ary","push","ary_reverse","reverse","ary_shuffle","_","shuffle","ary_sample","sample","ary_wrap","ary_cycle_at","index","Xinteger","imodulo","ary_move","to","v","tail","splice","apply","ary_rotate","arguments","undefined","shift","unshift","pop","ary_take","take","ary_drop","drop","ary_compact","reduce","a","val","ary_compact_blank","Xobject","present_p","exports"],"sources":["../src/xarray.js"],"sourcesContent":["import { Xobject } from \"./xobject.js\"\nimport { Xinteger } from \"./xinteger.js\"\nimport _ from \"lodash\"\n\nexport const Xarray = {\n  // expect(Gs.ary_each_slice_to_a([\"a\", \"b\", \"c\", \"d\"], 2)).toEqual([[\"a\", \"b\"], [\"c\", \"d\"]])\n  // expect(Gs.ary_each_slice_to_a([\"a\", \"b\", \"c\"], 2)).toEqual([[\"a\", \"b\"], [\"c\"]])\n  // expect(() => Gs.ary_each_slice_to_a([\"a\", \"b\"], 0)).toThrow()\n  // expect(Gs.ary_each_slice_to_a([], 2)).toEqual([])\n  ary_each_slice_to_a(ary, step) {\n    if (step <= 0) {\n      throw new Error(\"invalid slice size\")\n    }\n    const new_ary = []\n    for (let i = 0; i < ary.length; i += step) {\n      new_ary.push(ary.slice(i, i + step))\n    }\n    return new_ary\n  },\n\n  // 元を破壊させない\n  ary_reverse(ary) {\n    return [...ary].reverse()\n  },\n\n  // 元は破壊しない\n  ary_shuffle(ary) {\n    return _.shuffle(ary)\n  },\n\n  ary_sample(ary) {\n    return _.sample(ary)\n  },\n\n  // 必ず配列にする\n  ary_wrap(ary) {\n    if (!_.isArray(ary)) {\n      ary = [ary]\n    }\n    return ary\n  },\n\n  // はみ出ない\n  ary_cycle_at(ary, index) {\n    return ary[Xinteger.imodulo(index, ary.length)]\n  },\n\n  // ary 内のインデックス from の要素を to に移動\n  // https://qiita.com/nowayoutbut/items/991515b32805e21f8892\n  ary_move(ary, from, to) {\n    const n = ary.length\n    ary = [...ary]\n    to = Xinteger.imodulo(to, n)\n    if (from === to || from > n - 1 || to > n - 1) {\n      return ary\n    }\n    const v = ary[from]\n    const tail = ary.slice(from + 1)\n    ary.splice(from)\n    Array.prototype.push.apply(ary, tail)\n    ary.splice(to, 0, v)\n    return ary\n  },\n\n  ary_rotate(ary, n = 1) {\n    ary = [...ary]\n    if (ary.length > 0) {\n      if (n > 0) {\n        for (let i = 0; i < n; i += 1) {\n          ary.push(ary.shift())\n        }\n      } else {\n        for (let i = 0; i < -n; i += 1) {\n          ary.unshift(ary.pop())\n        }\n      }\n    }\n    return ary\n  },\n\n  ary_take(ary, index) {\n    return _.take(ary, index)\n  },\n\n  ary_drop(ary, index) {\n    return _.drop(ary, index)\n  },\n\n  // {1, null, undefined, \"\"} => [1, \"\"]\n  ary_compact(ary) {\n    return _.reduce(ary, (a, val) => {\n      if (val == null) {\n      } else {\n        a.push(val)\n      }\n      return a\n    }, [])\n  },\n\n  // {1, null, undefined, \"\"} => [1]\n  ary_compact_blank(ary) {\n    return _.reduce(ary, (a, val) => {\n      if (Xobject.present_p(val)) {\n        a.push(val)\n      }\n      return a\n    }, [])\n  },\n}\n"],"mappings":"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"}