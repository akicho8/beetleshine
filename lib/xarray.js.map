{"version":3,"file":"xarray.js","names":["_xobject","require","_xinteger","_lodash","_interopRequireDefault","obj","__esModule","default","Xarray","ary_each_slice_to_a","ary","step","Error","new_ary","i","length","push","slice","ary_reverse","reverse","ary_shuffle","_","shuffle","ary_wrap","isArray","ary_cycle_at","index","Xinteger","imodulo","ary_move","from","to","n","v","tail","splice","Array","prototype","apply","ary_rotate","arguments","undefined","shift","unshift","pop","ary_take","take","ary_drop","drop","ary_compact","reduce","a","val","ary_compact_blank","Xobject","present_p","exports"],"sources":["../src/xarray.js"],"sourcesContent":["import { Xobject } from \"./xobject.js\"\nimport { Xinteger } from \"./xinteger.js\"\nimport _ from \"lodash\"\n\nexport const Xarray = {\n  // expect(Gs.ary_each_slice_to_a([\"a\", \"b\", \"c\", \"d\"], 2)).toEqual([[\"a\", \"b\"], [\"c\", \"d\"]])\n  // expect(Gs.ary_each_slice_to_a([\"a\", \"b\", \"c\"], 2)).toEqual([[\"a\", \"b\"], [\"c\"]])\n  // expect(() => Gs.ary_each_slice_to_a([\"a\", \"b\"], 0)).toThrow()\n  // expect(Gs.ary_each_slice_to_a([], 2)).toEqual([])\n  ary_each_slice_to_a(ary, step) {\n    if (step <= 0) {\n      throw new Error(\"invalid slice size\")\n    }\n    const new_ary = []\n    for (let i = 0; i < ary.length; i += step) {\n      new_ary.push(ary.slice(i, i + step))\n    }\n    return new_ary\n  },\n\n  // 元を破壊させない\n  ary_reverse(ary) {\n    return [...ary].reverse()\n  },\n\n  // 元は破壊しない\n  ary_shuffle(ary) {\n    return _.shuffle(ary)\n  },\n\n  // 必ず配列にする\n  ary_wrap(ary) {\n    if (!_.isArray(ary)) {\n      ary = [ary]\n    }\n    return ary\n  },\n\n  // はみ出ない\n  ary_cycle_at(ary, index) {\n    return ary[Xinteger.imodulo(index, ary.length)]\n  },\n\n  // ary 内のインデックス from の要素を to に移動\n  // https://qiita.com/nowayoutbut/items/991515b32805e21f8892\n  ary_move(ary, from, to) {\n    const n = ary.length\n    ary = [...ary]\n    to = Xinteger.imodulo(to, n)\n    if (from === to || from > n - 1 || to > n - 1) {\n      return ary\n    }\n    const v = ary[from]\n    const tail = ary.slice(from + 1)\n    ary.splice(from)\n    Array.prototype.push.apply(ary, tail)\n    ary.splice(to, 0, v)\n    return ary\n  },\n\n  ary_rotate(ary, n = 1) {\n    ary = [...ary]\n    if (ary.length > 0) {\n      if (n > 0) {\n        for (let i = 0; i < n; i += 1) {\n          ary.push(ary.shift())\n        }\n      } else {\n        for (let i = 0; i < -n; i += 1) {\n          ary.unshift(ary.pop())\n        }\n      }\n    }\n    return ary\n  },\n\n  ary_take(ary, index) {\n    return _.take(ary, index)\n  },\n\n  ary_drop(ary, index) {\n    return _.drop(ary, index)\n  },\n\n  // {1, null, undefined, \"\"} => [1, \"\"]\n  ary_compact(ary) {\n    return _.reduce(ary, (a, val) => {\n      if (val == null) {\n      } else {\n        a.push(val)\n      }\n      return a\n    }, [])\n  },\n\n  // {1, null, undefined, \"\"} => [1]\n  ary_compact_blank(ary) {\n    return _.reduce(ary, (a, val) => {\n      if (Xobject.present_p(val)) {\n        a.push(val)\n      }\n      return a\n    }, [])\n  },\n}\n"],"mappings":"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"}